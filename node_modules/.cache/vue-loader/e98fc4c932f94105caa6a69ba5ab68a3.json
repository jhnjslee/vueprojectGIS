{"remainingRequest":"C:\\Users\\ljh\\Vueworkspace\\ninja\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ljh\\Vueworkspace\\ninja\\src\\components\\Calamity.vue?vue&type=style&index=0&id=f9b377b8&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ljh\\Vueworkspace\\ninja\\src\\components\\Calamity.vue","mtime":1600057169724},{"path":"C:\\Users\\ljh\\Vueworkspace\\ninja\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ljh\\Vueworkspace\\ninja\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ljh\\Vueworkspace\\ninja\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ljh\\Vueworkspace\\ninja\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ljh\\Vueworkspace\\ninja\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2NhbGluZm8gewogIGNvbG9yOiAwOwp9CgojYWNjZXB0QnRuIHsgCmJhY2tncm91bmQ6ICMyZmM5NzQ7CmNvbG9yOiAjZmZmOwpmbG9hdDogcmlnaHQ7CmRpc3BsYXk6IGJsb2NrOwpwYWRkaW5nOiAxMHB4IDEwcHg7CnRleHQtYWxpZ246IGNlbnRlcjsKdGV4dC1kZWNvcmF0aW9uOiBub25lOwp3aWR0aDogMjAwcHg7CmJvcmRlci1yYWRpdXM6IDhweDsgCm1hcmdpbi10b3A6IDE1cHg7Cm1hcmdpbi1ib3R0b206IDE1cHg7Cgp9CiNjYW5jZWxCdG4geyAKYmFja2dyb3VuZDogI2Y1MGIwYjsKY29sb3I6ICNmZmY7CmZsb2F0OiByaWdodDsKZGlzcGxheTogYmxvY2s7CnBhZGRpbmc6IDEwcHggMTBweDsKdGV4dC1hbGlnbjogY2VudGVyOwp0ZXh0LWRlY29yYXRpb246IG5vbmU7CndpZHRoOiAxMDBweDsKYm9yZGVyLXJhZGl1czogOHB4OyAKbWFyZ2luLXRvcDogMTVweDsKbWFyZ2luLWJvdHRvbTogMTVweDsKbWFyZ2luLXJpZ2h0OiAxMHB4Owp9Cgo="},{"version":3,"sources":["Calamity.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+VA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Calamity.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n  <v-card max-width=\"500\" class=\"mx-auto\">\r\n    \r\n\t\t\t\t\t<div class=\"boxTitle\">실시간 재난발생</div>\r\n\t\t\t\t\t<div class=\"alertTxt\">\r\n\t\t\t\t\t\t<div class=\"txtDate\">{{dateTime}}</div>\r\n\t\t\t\t\t\t<div class=\"txtTitle\">{{caltypes}} 발생 {{callevel}}단계</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div class=\"boxTitle topMargin\" >실시간 발생 재난</div>\r\n\t\t\t\t\t<div class=\"boxPoint\">\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li class=\"boxBlue\">\r\n\t\t\t\t\t\t\t\t<div class=\"blueTxt center\">재난번호</div>\r\n\t\t\t\t\t\t\t\t<div class=\"txtInputNormal center\"  value=\"\" placeholder=\"\" style=\"width:113px;\" readonly>\r\n                {{calNum}}번\r\n                </div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class=\"boxBlue\">\r\n\t\t\t\t\t\t\t\t<div class=\"blueTxt center\">발신 대상자</div>\r\n\t\t\t\t\t\t    <div class=\"txtInputNormal center\"  value=\"\" placeholder=\"\" style=\"width:113px;\" readonly>\r\n                {{alltarget}}명\r\n                </div>\t\r\n              </li>\r\n              <li class=\"boxBlue\">\r\n\t\t\t\t\t\t\t\t<div class=\"blueTxt center\">위도</div>\r\n\t\t\t\t\t\t\t\t<div class=\"txtInputNormal center\"  value=\"\" placeholder=\"\" style=\"width:113px;\" readonly>\r\n                {{pointX}}\r\n                </div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class=\"boxBlue\">\r\n\t\t\t\t\t\t\t\t<div class=\"blueTxt center\">경도</div>\r\n\t\t\t\t\t\t    <div class=\"txtInputNormal center\"  value=\"\" placeholder=\"\" style=\"width:113px;\" readonly>\r\n                {{pointY}}\r\n                </div>\t\r\n              </li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style=\"margin-top:10px;\">\r\n\t\t\t\t\t\t<span class=\"btnNormal\" ><input type=\"button\" @click=\"openModal\" value=\"실시간 재난 상세보기\"/></span>\r\n              <MyModal @close=\"closeModal\" v-if=\"modal\" style=\"width: 100%;\">\r\n                <!-- default 슬롯 콘텐츠 -->\r\n                \r\n                <h1 style=\"width:750px;\">재난 상세 정보</h1>\r\n                <h3 align=\"left\" >재난 대상자 목록</h3>\r\n                <hr>\r\n                <div >\r\n                  <ul id=\"example-1\">\r\n                    <div v-if=\"this.uuidArray.length ==0\">\r\n                      전송 대상자가 없습니다.\r\n                    </div>\r\n                    <div v-if=\"this.uuidArray.length>0\">\r\n                      <v-data-table\r\n                        :headers=\"headers\"\r\n                        :items=\"uuidArrayList\"\r\n                        :items-per-page=\"15\"\r\n                        class=\"elevation-1\"\r\n                      ></v-data-table>\r\n                    </div>\r\n                  </ul>\r\n                </div>\r\n                <template slot=\"footer\">\r\n                  <button id=\"acceptBtn\" @click=\"doSend\">문자 발송 하기</button>\r\n                  <button id=\"cancelBtn\" @click=\"closeModal\">취소</button>\r\n                </template>\r\n              </MyModal>\r\n\r\n\t\t\t\t\t\t</div>\t\t\t\r\n\t\t\t\t\t<div class=\"boxTitle topMargin\">전체 사용자 통계</div>\r\n          <div class=\"boxGraph\">\r\n\t\t\t\t\t <canvas id=\"myChart\" width=\"300\" height=\"220\"></canvas>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"boxPoint\" style=\"margin-top:20px;\">\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li class=\"boxBlue\">\r\n\t\t\t\t\t\t\t\t<div class=\"blueTxt center\">수신 정상(명)</div>\r\n\t\t\t\t\t\t\t\t<div class=\"txtCountBlue\">100</div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class=\"boxBlue\">\r\n\t\t\t\t\t\t\t\t<div class=\"blueTxt center\">미수신(명)</div>\r\n\t\t\t\t\t\t\t\t<div class=\"txtCountRed\">100</div>\r\n\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n          \r\n\r\n\r\n    <v-container style=\"padding:5px\">\r\n        <SweetModal  icon=\"success\" ref=\"modal\" title=\"성공\">\r\n          메세지 전송 성공\r\n        </SweetModal> \r\n      <!-- 컴포넌트 MyModal -->\r\n\r\n    </v-container>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport {EventBus} from \"./event-bus\";\r\nimport MyModal from './markerClick.vue'\r\nimport { SweetModal, SweetModalTab } from 'sweet-modal-vue'\r\n\r\nvar EPSG5179 = new OpenLayers.Projection('EPSG:5179');\r\nvar EPSG4326 = new OpenLayers.Projection('EPSG:4326');\r\nlet now =\"\"\r\n\r\nexport default {\r\n  data() {\r\n\r\n    return {\r\n      segmentSendingList: [],\r\n      pointX: 0,\r\n      pointY: 0,\r\n      dateTime: \" \",\r\n      types: \"\",\r\n      level: 0,\r\n      callevel: \"\",\r\n      caltypes: \"\",\r\n      calNum: 0,\r\n      danger: 0,\r\n      littledanger: 0,\r\n      normal: 0,\r\n      safe: 0,\r\n      alltarget: 0,\r\n      message: '',\r\n      uuidArray: [],\r\n      modal: false,\r\n\r\n      headers: [\r\n         \r\n          { text: '사용자번호', value: 'uuid', align:'center' },\r\n          { text: '위도', value: 'uuidlat' },\r\n          { text: '경도', value: 'uuidlog' },\r\n          { text: '세그먼트', value: 'uuidseg' },\r\n        ],\r\n\r\n        uuidArrayList: [\r\n         \r\n        ],\r\n    }\r\n\r\n  },\r\n  components: {\r\n    MyModal,\r\n    SweetModal,\r\n    SweetModalTab\r\n  },\r\n  created() {\r\n    EventBus.$on('use-eventbus', calIndex => {\r\n     \r\n\r\n    });\r\n\r\n    EventBus.$on('calamity-test', calamityAllinfo => {\r\n      \r\n      this.uuidArrayList = [];\r\n      var uuidsendingList = new Array();\r\n\r\n      this.danger = calamityAllinfo.dangerUser;\r\n      this.littledanger = calamityAllinfo.littledangerUser;\r\n      this.normal = calamityAllinfo.normalUser;\r\n      this.safe = calamityAllinfo.safeUser;\r\n\r\n      this.alltarget = calamityAllinfo.targetUser;\r\n      this.calNum = calamityAllinfo.calNumber;\r\n      this.message = calamityAllinfo.calMessageInfo;\r\n      \r\n      this.segmentSendingList = calamityAllinfo.segmentSendingFeature;\r\n\r\n      var ctx = document.getElementById('myChart').getContext('2d');\r\n      var myPieChart = new Chart(ctx, {\r\n        type: 'pie',\r\n        data: {\r\n          labels: ['수신자', '미수신자'],\r\n          datasets: [{\r\n            label: '# of Votes',\r\n            data: [this.alltarget,this.safe],\r\n            backgroundColor: [\r\n              'rgba(54, 162, 235, 0.5)',\r\n              'rgba(255, 99, 132, 0.5)'\r\n            ],\r\n            borderColor: [\r\n              'rgba(54, 162, 235, 0.5)',\r\n              'rgba(255, 99, 132, 0.5)'\r\n            ],\r\n            borderWidth: 1\r\n          }]\r\n        },\r\n        options: {\r\n          scales: {\r\n            yAxes: [{\r\n              ticks: {\r\n                beginAtZero: true\r\n              }\r\n            }]\r\n          }\r\n        }\r\n      });\r\n\r\n\r\n      for (var i = 0; i < calamityAllinfo.uuidAllInfo.length; i++) {\r\n        if (calamityAllinfo.uuidAllInfo[i].uuidcontainseg != -1) {\r\n          this.uuidArray.push(calamityAllinfo.uuidAllInfo[i])\r\n  \r\n        var uuidArrayListIndex = {\r\n          uuid: \"\",\r\n          uuidlat: '',\r\n          uuidlog: '',\r\n          uuidseg: '',\r\n        }\r\n\r\n        var stringX=Number(calamityAllinfo.uuidAllInfo[i].x)\r\n        var stringY=Number(calamityAllinfo.uuidAllInfo[i].y)\r\n        var wgs84 = proj4('EPSG:5179', 'EPSG:4326', [stringX,stringY]);\r\n        \r\n        var pointX = wgs84[0].toFixed(5)\r\n        var pointY = wgs84[1].toFixed(5)\r\n\r\n        uuidArrayListIndex.uuid=calamityAllinfo.uuidAllInfo[i].uuid; \r\n        uuidArrayListIndex.uuidlat=pointX;\r\n        uuidArrayListIndex.uuidlog=pointY;\r\n        uuidArrayListIndex.uuidseg=calamityAllinfo.uuidAllInfo[i].uuidcontainseg;\r\n        this.uuidArrayList.push(uuidArrayListIndex);\r\n        uuidsendingList.uuid = calamityAllinfo.uuidAllInfo[i].uuid\r\n        uuidsendingList.push(calamityAllinfo.uuidAllInfo[i].uuid)\r\n        }\r\n      }\r\n      this.alltarget = this.uuidArray.length\r\n\r\n      now = new Date();\r\n      var wgs84 = proj4('EPSG:5179', 'EPSG:4326', [calamityAllinfo.callat,calamityAllinfo.callon]);\r\n        \r\n      this.pointX = wgs84[0].toFixed(5)\r\n      this.pointY = wgs84[1].toFixed(5)\r\n      this.level = calamityAllinfo.callevel\r\n      this.types = calamityAllinfo.calType\r\n      this.dateTime = calamityAllinfo.caldate.toLocaleString()\r\n      console.log(this.types);\r\n     switch (this.types) {\r\n        case \"경사지 붕괴\":\r\n          this.caltypes = \"경사지 붕괴\"\r\n          break;\r\n        case \"홍수\":\r\n          this.caltypes = \"홍수\"\r\n          break;\r\n        default:\r\n      }\r\n      switch (this.level) {\r\n        case 1:\r\n          this.callevel = \"위험\"\r\n          document.getElementById('calinfo').style.color = \"#FF0000\";\r\n          break;\r\n        case 2:\r\n          this.callevel = \"주의\"\r\n          document.getElementById('calinfo').style.color = \"#FFBF00\";\r\n          break;\r\n        case 3:\r\n          this.callevel = \"경계\"\r\n          document.getElementById('calinfo').style.color = \"#2fc974\";\r\n          break;\r\n        case 4:\r\n          this.callevel = \"관심\"\r\n          document.getElementById('calinfo').style.color = \"#0080FF\";\r\n          break;\r\n      }\r\n    });\r\n  },\r\n\r\n  mounted() {\r\n    var ctx = document.getElementById('myChart').getContext('2d');\r\n    var myPieChart = new Chart(ctx, {\r\n      type: 'pie',\r\n     data: {\r\n          labels: ['수신자', '미수신자'],\r\n          datasets: [{\r\n            label: '# of Votes',\r\n            data: [this.danger,this.safe],\r\n            backgroundColor: [\r\n              'rgba(54, 162, 235, 0.5)',\r\n              'rgba(255, 99, 132, 0.5)'\r\n            ],\r\n            borderColor: [\r\n              'rgba(54, 162, 235, 0.5)',\r\n              'rgba(255, 99, 132, 0.5)'\r\n            ],\r\n            borderWidth: 1\r\n          }]\r\n      },\r\n    });\r\n  },\r\n  methods: {\r\n    openModal() {\r\n      this.modal = true\r\n    },\r\n    closeModal() {\r\n      this.modal = false\r\n    },\r\n    doSend() {\r\n      //uuid 리스트 보내기 \r\n      var  sendingserverArray = new Array()\r\n\r\n      for (var i = 0; i < this.segmentSendingList.length; i++) {\r\n        var sendingserverIndex = {\r\n          segmentid: 0,\r\n          dangerStep: 0,\r\n          dangerRange: 0,\r\n          occurType: 0,\r\n          occurDate: 0,\r\n          lat: 0,\r\n          lon: 0,\r\n          dangermessage: \"\",\r\n          uuidlist: []\r\n        }\r\n\r\n        var wgs84 = proj4('EPSG:5179', 'EPSG:4326', [this.segmentSendingList[i].callatIndex,this.segmentSendingList[i].callogIndex]);\r\n \r\n    \r\n        sendingserverIndex.segmentid = this.segmentSendingList[i].segId;\r\n        sendingserverIndex.dangerStep = this.segmentSendingList[i].callLevelIndex;\r\n        sendingserverIndex.dangerRange = this.segmentSendingList[i].calRadiusIndex;\r\n        sendingserverIndex.occurType = this.segmentSendingList[i].mainType;\r\n        sendingserverIndex.occurDate = this.segmentSendingList[i].callTimeIndex;\r\n        sendingserverIndex.lat = wgs84[0];\r\n        sendingserverIndex.lon = wgs84[1];\r\n        sendingserverIndex.dangerMessage = this.message;\r\n        sendingserverIndex.uuidlist = this.segmentSendingList[i].segmentUserList;\r\n          \r\n          if(sendingserverArray.findIndex(i => i.segmentid == sendingserverIndex.segmentid)==-1){\r\n          sendingserverArray.push(sendingserverIndex)\r\n          }\r\n      }\r\n        this.segmentSendingList = [];\r\n        this.uuidArrayList=[];\r\n\r\n      if(confirm(\"해당 인원(들)에게 '\" + this.message + \"' 문자를 전송 하시겠습니까??\") == true) { //확인\r\n        this.$emit('childs-event', sendingserverArray)\r\n        this.closeModal();\r\n        this.$refs.modal.open();\r\n      } else { //취소\r\n        this.closeModal();\r\n        return;\r\n      }\r\n    },\r\n  \r\n  }\r\n\r\n}\r\n</script>\r\n\r\n  <style scoped>\r\n    #calinfo {\r\n      color: 0;\r\n    }\r\n  \r\n    #acceptBtn { \r\n    background: #2fc974;\r\n    color: #fff;\r\n    float: right;\r\n    display: block;\r\n    padding: 10px 10px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    width: 200px;\r\n    border-radius: 8px; \r\n    margin-top: 15px;\r\n    margin-bottom: 15px;\r\n  \r\n    }\r\n    #cancelBtn { \r\n    background: #f50b0b;\r\n    color: #fff;\r\n    float: right;\r\n    display: block;\r\n    padding: 10px 10px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    width: 100px;\r\n    border-radius: 8px; \r\n    margin-top: 15px;\r\n    margin-bottom: 15px;\r\n    margin-right: 10px;\r\n    }\r\n    \r\n  </style>\r\n\r\n"]}]}